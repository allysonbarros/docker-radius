sudo: required
services:
  - docker

environment:
  MYSQL_ROOT_PASSWORD: verysecret

before_install:
  - docker pull mysql:5.6
  - docker run -d -e "MYSQL_ROOT_PASSWORD=verysecret" --name mysqldb1 mysql:5.6 
  - docker ps -a
  - docker build -t realworld/docker-radius .

script:
  - docker run --link mysqldb1:mysql -e "MYSQL_ROOT_PASSWORD=verysecret" realworld/docker-radius /bin/bash /usr/src/build/test-radius.sh
  - docker run --link mysqldb1:mysql -e "MYSQL_ROOT_PASSWORD=verysecret" realworld/docker-radius /bin/bash /usr/src/build/load-test-data.sh
  - docker run --link mysqldb1:mysql -e "MYSQL_ROOT_PASSWORD=verysecret" realworld/docker-radius radtest test@testing.com testing123 127.0.0.1 0 testing123